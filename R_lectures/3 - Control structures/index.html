<!DOCTYPE html>
<html>
<head>
  <title>R programming</title>
  <meta charset="utf-8">
  <meta name="description" content="R programming">
  <meta name="author" content="Manuel A. Bolivar">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/zenburn.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="./assets/css/ribbons.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <hgroup class="auto-fadein">
    <h1>R programming</h1>
    <h2>Lecture 3. Control structures</h2>
    <p>Manuel A. Bolivar<br/></p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:;">
  <article data-timings="">
    <style>
em {
  font-style: italic
}
strong {
  font-weight: bold;
}
</style>

<h2>Motivation</h2>

<ul>
<li>The statements in R are executed sequentially (normally).</li>
<li>But sometimes you might:

<ul>
<li>Execute some statemets repetitively (<code>for</code>, <code>while</code>)</li>
<li>Execute statements only if certain conditions are met (<code>if-else</code>)</li>
</ul></li>
</ul>

<p><strong>e.g.</strong></p>

<ul>
<li>Read multiple files at once (.agd).</li>
<li>Identify valid participants given their MVPA minutes.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="segue dark nobackground" id="slide-2" style="background:;">
  <hgroup>
    <h2>Repetition and looping</h2>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="class" id="id" style="background:;">
  <hgroup>
    <h2>Repetition and looping</h2>
  </hgroup>
  <article data-timings="">
    <p>Looping constructs repetitively execute a statement or series of statements until a condition is not true.</p>

<ul>
<li><code>for</code></li>
<li><code>while</code></li>
<li><code>repeat</code>*</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>For</h2>
  </hgroup>
  <article data-timings="">
    <p>The <code>for</code> loop executes a statement repetitively until a variableâ€™s value is no longer contained in the sequence <code>seq</code>. The syntaxis is:</p>

<pre><code class="r">&gt; for(var in seq){
+   statement
+ }
</code></pre>

<p>where,</p>

<ul>
<li><em>var</em> is a variable name,</li>
<li><em>seq</em> is a vector of any type, and</li>
<li><em>statement</em> is the statement you want to execute repetitively.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>For - Example 1</h2>
  </hgroup>
  <article data-timings="">
    <p>Print the numbers from 1 to 10</p>

<pre><code class="r">&gt; nums &lt;- 1:10
</code></pre>

<pre><code class="r">&gt;   for(i in nums){
+     print(i)
+   }
## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>For - Example 2</h2>
  </hgroup>
  <article data-timings="">
    <p>The for loop can also iterate other data type vectors.</p>

<pre><code class="r">&gt;   weekdays &lt;- c(&quot;Monday&quot;,&quot;Tuesday&quot;,&quot;Wednesday&quot;,&quot;Thursday&quot;,&quot;Friday&quot;)
</code></pre>

<pre><code class="r">&gt;   for(day in weekdays){
+     print(day)
+   }
## [1] &quot;Monday&quot;
## [1] &quot;Tuesday&quot;
## [1] &quot;Wednesday&quot;
## [1] &quot;Thursday&quot;
## [1] &quot;Friday&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>For - Example 3</h2>
  </hgroup>
  <article data-timings="">
    <p><code>seq_along(x)</code> function returns a numeric vector of the form <code>1:length(x)</code>. It can be used as argument for the for loop.</p>

<pre><code class="r">&gt;   weekdays &lt;- c(&quot;Monday&quot;,&quot;Tuesday&quot;,&quot;Wednesday&quot;,&quot;Thursday&quot;,&quot;Friday&quot;)
</code></pre>

<pre><code class="r">&gt;   for(i in seq_along(weekdays)){
+     day &lt;- weekdays[i]
+     print(day)
+   }
## [1] &quot;Monday&quot;
## [1] &quot;Tuesday&quot;
## [1] &quot;Wednesday&quot;
## [1] &quot;Thursday&quot;
## [1] &quot;Friday&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>For - Exercises</h2>
  </hgroup>
  <article data-timings="">
    <ol>
<li>Write a program which sums the integers from 1 to 10 using a <code>for</code> loop (and prints the total at the end).</li>
<li>Write a program which finds the factorial of a given number. E.g. 3 factorial, or 3! is equal to 3 x 2 x 1; 5! is equal to 5 x 4 x 3 x 2 x 1, etc.. Your program should only contain a single loop.</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>While</h2>
  </hgroup>
  <article data-timings="">
    <p>A <code>while</code> loop executes a statement repetitively until the condition is no longer true. The sintaxys is: </p>

<pre><code class="r">&gt; while(cond){
+   statement
+ }
</code></pre>

<p>where,</p>

<ul>
<li><em>cond</em> is the condition that should be TRUE for keep iterating in the loop.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>While - Example 1</h2>
  </hgroup>
  <article data-timings="">
    <p>Add the numbers from 1 to 10 together.</p>

<pre><code class="r">&gt; sum &lt;- 0
&gt; i &lt;- 1
&gt; while(i&lt;=10){
+   sum &lt;- i + sum
+   i &lt;- i + 1
+ }
</code></pre>

<pre><code class="r">&gt; sum
## [1] 55
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>While - Exercises</h2>
  </hgroup>
  <article data-timings="">
    <ol>
<li>Write a program which uses a while loop to sum the squares of integers (starting from 1) until the total exceeds 200. Print the final total and the last number to be squared and added.</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="segue dark nobackground" id="slide-12" style="background:;">
  <hgroup>
    <h2>Conditional execution</h2>
  </hgroup>
  <article data-timings="">
    
  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>Conditional execution</h2>
  </hgroup>
  <article data-timings="">
    <p>In conditional execution, a statement or statements are executed only if a specified condition is met. </p>

<p>These constructs include:</p>

<ul>
<li><code>if-else</code></li>
<li><code>ifelse</code></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>if-else</h2>
  </hgroup>
  <article data-timings="">
    <p>The <code>if-else</code> control structure executes a statement if a given condition is true.</p>

<pre><code class="r">&gt; # Option 1
&gt; if(cond){
+   statement #do something
+ }
</code></pre>

<pre><code class="r">&gt; # Option 2
&gt; if(cond){
+   statement1 # do something
+ } else{
+   statement2 # do somenthing else
+ }
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>if-else</h2>
  </hgroup>
  <article data-timings="">
    <pre><code class="r">&gt; # Option 3
&gt; if(cond1){
+   statement1 # do something
+ } else if(cond2){
+   statement2 # do somenthing different
+ } else{
+   statement3 # do something else
+ }
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-16" style="background:;">
  <hgroup>
    <h2>if-else</h2>
  </hgroup>
  <article data-timings="">
    <p>The conditions can be a compound conditions, e.g.</p>

<ul>
<li><code>if(cond1 &amp; cond2) {statement}</code>: <code>&amp;</code> is an <em>and</em> operator. </li>
<li><code>if(cond1 | cond2) {statement}</code>: <code>|</code> is an <em>or</em> operator. </li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h2>if-else - Example 1</h2>
  </hgroup>
  <article data-timings="">
    <p>A participant with more than 600 minutes of moderate-to-vigorous physical activity (MVPA) in average is considered valid.</p>

<pre><code class="r">&gt; minutes &lt;- 750
&gt; if(minutes &gt; 600){
+   print(&quot;Valid participant&quot;)
+ }
## [1] &quot;Valid participant&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h2>if-else - Example 2</h2>
  </hgroup>
  <article data-timings="">
    <p>A participant with more than 600 minutes of moderate-to-vigorous physical activity (MVPA) in average is considered valid. <strong>Otherwise, they are invalid participants.</strong></p>

<pre><code class="r">&gt; minutes &lt;- 450
&gt; if(minutes &gt; 600){
+   print(&quot;Valid participant&quot;)
+ } else{
+   print(&quot;Invalid participant&quot;)
+ }
## [1] &quot;Invalid participant&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h2>if-else - Example 3</h2>
  </hgroup>
  <article data-timings="">
    <p>A participant with more than 600 minutes of moderate-to-vigorous physical activity (MVPA) in average <strong>and more than 4 valid days of wear time</strong> is considered valid. Otherwise, they are invalid participants.</p>

<pre><code class="r">&gt; minutes &lt;- 750
&gt; valdays &lt;- 3
&gt; if(minutes &gt; 600 &amp; valdays &gt; 4){
+   print(&quot;Valid participant&quot;)
+ } else{
+   print(&quot;Invalid participant&quot;)
+ }
## [1] &quot;Invalid participant&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h2>Logical operators</h2>
  </hgroup>
  <article data-timings="">
    <!-- html table generated in R 3.2.3 by xtable 1.8-2 package -->

<!-- Sun Mar 06 17:33:28 2016 -->

<table border=1>
<tr> <th> Operator </th> <th> Description </th>  </tr>
  <tr> <td> &lt; </td> <td> less than
 </td> </tr>
  <tr> <td> &lt;= </td> <td> less than or equal to </td> </tr>
  <tr> <td> &gt; </td> <td> greater than </td> </tr>
  <tr> <td> &gt;= </td> <td> greater than or equal to </td> </tr>
  <tr> <td> == </td> <td> exactly equal to </td> </tr>
  <tr> <td> != </td> <td> not equal to </td> </tr>
  <tr> <td> !x </td> <td> Not x </td> </tr>
  <tr> <td> x | y </td> <td> x OR y </td> </tr>
  <tr> <td> x &amp; y </td> <td> x AND y </td> </tr>
   </table>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h2>if-else - Exercises</h2>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Run the following code chunk.</p>

<pre><code class="r">&gt; set.seed(123) #Set the seed for the random number generation
&gt; x &lt;- rnorm(n = 1000, mean = 1, sd = 3)
</code></pre>

<ul>
<li>How many numbers in <code>x</code> are less or equal than 0. Use a <code>for</code> or <code>while</code> loop.</li>
<li>How many numbers in <code>x</code> are more than 0 and less or equal than 1. Use a <code>for</code> or <code>while</code> loop.</li>
</ul></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-22" style="background:;">
  <hgroup>
    <h2>ifelse</h2>
  </hgroup>
  <article data-timings="">
    <p>The <code>ifelse</code> construct is a compact and vectorized version of the <code>if-else</code> construct.
The syntax is:</p>

<pre><code class="r">&gt; ifelse(cond,statement1,statement2)
</code></pre>

<ul>
<li><p>The first statement is executed if <em>cond</em> is <code>TRUE</code>. If <em>cond</em> is <code>FALSE</code>, the second statement is executed.</p></li>
<li><p>Use <code>ifelse</code> when you want to take a binary action or when you want to input and output vectors from the construct.</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-23" style="background:;">
  <hgroup>
    <h2>Exercises</h2>
  </hgroup>
  <article data-timings="">
    <ol>
<li><p>Read the database <em>COL PA MARA.csv</em>. (<a href="https://goo.gl/77zASV">data</a>) (<a href="https://goo.gl/28MBXi">codebook</a>)</p>

<pre><code class="r">&gt; acdata &lt;- read.csv(&quot;COL PA MARA.csv&quot;)
</code></pre>

<p>A valid participant is the one who wear the accelerometer for more than 4 valid days and at least one valid weekend day. However, if a person wear the accelerometry for more than 2000 minutes in midweek, he is also considered a valid participant.</p>

<ul>
<li>Create a new logical variable named <code>valid</code> which indicates if a particiant is valid or not. Bind your new variable to <code>acdata</code> data frame. (Use loops and conditional statements)</li>
<li>How many participants are valid?</li>
</ul></li>
<li><p>Using the <code>ifelse()</code> function, create a new logical variable named <code>valid</code> which indicates if a particiant is valid or not.</p>

<ul>
<li>Compare the code used in numerals 1 and 2, which one of them is more efficient?</li>
</ul></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-24" style="background:;">
  <hgroup>
    <h2>Remarks</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Looping in R can be inefficient and time consuming when youâ€™re processing the rows or columns of large datasets.</li>
<li>Whenever possible, itâ€™s better to use Râ€™s built-in numerical and character functions in conjunction with the apply family of functions.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

<slide class="" id="slide-25" style="background:;">
  <hgroup>
    <h2>References</h2>
  </hgroup>
  <article data-timings="">
    <ul>
<li>Kabacoff, R. (2015). <em>R in action: data analysis and graphics with R</em>. Manning Publications Co.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='NA'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Repetition and looping'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Repetition and looping'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='For'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='For - Example 1'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='For - Example 2'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='For - Example 3'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='For - Exercises'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='While'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='While - Example 1'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='While - Exercises'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Conditional execution'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='Conditional execution'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='if-else'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='if-else'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='if-else'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='if-else - Example 1'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='if-else - Example 2'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='if-else - Example 3'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='Logical operators'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='if-else - Exercises'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='ifelse'>
         22
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='Exercises'>
         23
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='Remarks'>
         24
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='References'>
         25
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>